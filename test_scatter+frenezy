<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test Unitaire - Scatter et FrÃ©nÃ©sie</title>
<style>
    body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 20px; }
    h1 { color: #007bff; }
    ul { list-style-type: none; padding: 0; }
    li { margin-bottom: 10px; font-size: 1.2em; }
    .ok { color: green; }
    .fail { color: red; }
</style>
</head>
<body>

<h1>Tests Automatiques : Scatter & FrÃ©nÃ©sie</h1>
<ul id="test-results"></ul>

<script>
    // --- Variables simulant ton slot ---
    const SYMBOLS = ["ğŸ’","ğŸ‹","ğŸŠ","ğŸ””","BAR","7","ğŸŒŸ"];
    const SYMBOLS_FRENZY = ["ğŸ’","ğŸ‹","ğŸŠ","ğŸ””","BAR","7","ğŸŒŸ"];
    const FRENZY_SPINS_AWARDED = 10;

    let activeCheatMode = "none";
    let isFrenzyModeActive = false;
    let frenzySpinsRemaining = 0;

    function getRandomSymbol() {
        const list = SYMBOLS;
        return list[Math.floor(Math.random() * list.length)];
    }

    // Fonction pour gÃ©nÃ©rer une grille avec prise en compte du mode Scatter
    function generateFinalGrid() {
        let grid = [];
        for (let r = 0; r < 3; r++) {
            let row = [];
            for (let c = 0; c < 5; c++) {
                if(activeCheatMode === "scatter" && ((r===0 && c===0)||(r===1 && c===2)||(r===2 && c===4))) {
                    row.push("ğŸŒŸ");
                } else {
                    row.push(getRandomSymbol());
                }
            }
            grid.push(row);
        }
        return grid;
    }

    function countScatters(grid) {
        let count = 0;
        for (let r = 0; r < 3; r++)
            for (let c = 0; c < 5; c++)
                if (grid[r][c] === "ğŸŒŸ") count++;
        return count;
    }

    function startFrenzyMode() {
        if(!isFrenzyModeActive) isFrenzyModeActive = true;
        frenzySpinsRemaining += FRENZY_SPINS_AWARDED;
    }

    function endFrenzyMode() {
        isFrenzyModeActive = false;
        frenzySpinsRemaining = 0;
    }

    // --- Test helper ---
    function assert(desc, condition) {
        const li = document.createElement('li');
        li.textContent = desc + " â†’ " + (condition ? "âœ… OK" : "âŒ Ã‰chec");
        li.className = condition ? "ok" : "fail";
        document.getElementById('test-results').appendChild(li);
    }

    // --- Tests Automatiques ---
    const TEST_RUNS = 5;

    // Test 1 : Scatter garanti
    activeCheatMode = "scatter";
    for(let i=1; i<=TEST_RUNS; i++){
        const grid = generateFinalGrid();
        const scatterCount = countScatters(grid);
        assert(`Grille ${i} - >= 3 scatters`, scatterCount >= 3);
    }

    // Test 2 : Activation du mode FrÃ©nÃ©sie
    startFrenzyMode();
    assert("Mode FrÃ©nÃ©sie activÃ©", isFrenzyModeActive);
    assert("Tours FrÃ©nÃ©sie ajoutÃ©s", frenzySpinsRemaining === FRENZY_SPINS_AWARDED);

    // Test 3 : Terminer le mode FrÃ©nÃ©sie
    endFrenzyMode();
    assert("Mode FrÃ©nÃ©sie terminÃ©", !isFrenzyModeActive);
    assert("Tours FrÃ©nÃ©sie rÃ©initialisÃ©s", frenzySpinsRemaining === 0);

    // Nettoyage
    activeCheatMode = "none";

</script>
</body>
</html>
